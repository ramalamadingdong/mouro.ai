{% load static %}
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}Rami Mouro — Senior Software Engineer, Qualcomm{% endblock %}</title>
    <meta name="description" content="{% block meta_description %}Portfolio of Rami Mouro — embedded AI engineer at Qualcomm, FIRST Robotics mentor, and open-source contributor building tools for the next generation of roboticists.{% endblock %}">
    <meta property="og:title" content="Rami Mouro — Senior Software Engineer, Qualcomm">
    <meta property="og:description" content="Portfolio of Rami Mouro — embedded AI engineer at Qualcomm, FIRST Robotics mentor, and open-source contributor building tools for the next generation of roboticists.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://mouro.ai/">
    <meta property="og:site_name" content="Rami Mouro">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Playfair+Display:wght@500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/site.css' %}">
</head>
<body>
    <header class="site-header">
        <div class="nav-wrap">
            <a class="logo" href="/">Rami Mouro</a>
            <nav class="nav-links">
                <a class="nav-link" href="/projects/">Projects</a>
                <a class="nav-link" href="https://www.linkedin.com/in/rami-mouro/" target="_blank" rel="noreferrer">LinkedIn</a>
            </nav>
        </div>
    </header>
    <main class="page">
        {% block content %}{% endblock %}
    </main>
    <script>
        const revealTargets = document.querySelectorAll("[data-reveal]");
        const revealObserver = new IntersectionObserver(
            (entries) => {
                entries.forEach((entry) => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add("is-visible");
                        revealObserver.unobserve(entry.target);
                    }
                });
            },
            { threshold: 0.2 }
        );
        revealTargets.forEach((target) => revealObserver.observe(target));

        const carousels = document.querySelectorAll("[data-carousel]");
        carousels.forEach((carousel) => {
            const track = carousel.querySelector("[data-carousel-track]");
            const prevButton = carousel.querySelector(".carousel-button.prev");
            const nextButton = carousel.querySelector(".carousel-button.next");

            if (!track || !prevButton || !nextButton) {
                return;
            }

            const getScrollAmount = () => {
                const card = track.querySelector(".project-card");
                if (!card) {
                    return 320;
                }
                const styles = window.getComputedStyle(track);
                const gap = parseFloat(styles.gap || styles.columnGap || "0");
                return card.getBoundingClientRect().width + gap;
            };

            const scrollTrack = (direction) => {
                track.scrollBy({ left: direction * getScrollAmount(), behavior: "smooth" });
            };

            const atEnd = () => {
                const maxScrollLeft = track.scrollWidth - track.clientWidth;
                return track.scrollLeft >= maxScrollLeft - 2;
            };

            prevButton.addEventListener("click", () => scrollTrack(-1));
            nextButton.addEventListener("click", () => scrollTrack(1));

            let autoAdvanceId = null;
            const startAutoAdvance = () => {
                if (autoAdvanceId) {
                    return;
                }
                autoAdvanceId = window.setInterval(() => {
                    if (document.hidden) {
                        return;
                    }
                    if (atEnd()) {
                        track.scrollTo({ left: 0, behavior: "smooth" });
                        return;
                    }
                    scrollTrack(1);
                }, 6000);
            };

            const stopAutoAdvance = () => {
                if (!autoAdvanceId) {
                    return;
                }
                window.clearInterval(autoAdvanceId);
                autoAdvanceId = null;
            };

            startAutoAdvance();

            carousel.addEventListener("mouseenter", stopAutoAdvance);
            carousel.addEventListener("mouseleave", startAutoAdvance);
            carousel.addEventListener("focusin", stopAutoAdvance);
            carousel.addEventListener("focusout", startAutoAdvance);
            document.addEventListener("visibilitychange", () => {
                if (document.hidden) {
                    stopAutoAdvance();
                } else {
                    startAutoAdvance();
                }
            });
        });
    </script>
</body>
</html>
